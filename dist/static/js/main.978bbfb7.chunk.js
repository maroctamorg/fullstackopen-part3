(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(14),r=t.n(a),s=t(2),o=t(3),c=t.n(o);const l="/api/persons";var d=()=>c.a.get(l).then((e=>e.data)),h=e=>c.a.post(l,e).then((e=>e.data)),u=(e,n)=>c.a.put(`${l}/${e}`,n).then((e=>e.data)),b=e=>c.a.delete(`${l}/${e}`),i=t(0);const m=e=>{let{message:n,type:t}=e;return console.log("Call to Notification"),null===n||null===t?(console.log("Returning null, params: ",n,t),null):Object(i.jsx)("div",{className:t,children:n})},j=e=>Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:e.search,onChange:e.handler})]}),p=e=>Object(i.jsxs)("form",{onSubmit:e.addPerson,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]}),g=e=>{let{person:n,deleteEntry:t}=e;return Object(i.jsxs)(i.Fragment,{children:[`${n.name} ${n.number}`," ",Object(i.jsx)("button",{onClick:()=>t(n.id),children:"delete"})," ",Object(i.jsx)("br",{})]})},y=e=>Object(i.jsx)("div",{children:e.persons.map((n=>Object(i.jsx)(g,{person:n,deleteEntry:e.deleteEntry},n.id)))});var O=()=>{const[e,n]=Object(s.useState)([]),[t,a]=Object(s.useState)(""),[r,o]=Object(s.useState)(""),[c,l]=Object(s.useState)(""),g="error",O="success",[f,$]=Object(s.useState)({message:null,type:g}),x=(e,n)=>{$({message:e,type:n}),setTimeout((()=>{$({message:null,type:null})}),5e3)};Object(s.useEffect)((()=>{d().then((e=>n(e))).catch((e=>{x("Unable to fetch phonebook from the server. Please refresh the page and try again!",g)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)(m,{message:f.message,type:f.type}),Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{search:c,handler:e=>{l(e.target.value)}}),Object(i.jsx)("h3",{children:"add a new entry"}),Object(i.jsx)(p,{addPerson:s=>{s.preventDefault();const c={name:t,number:r};if(e.map((e=>e.name)).includes(c.name))if(e.map((e=>e.number)).includes(c.number))x(`The entry ${t} ${r} is already added to the phonebook`,g);else{window.confirm(`Update phone number for entry '${c.name} to ${c.number}'?`)&&u(e.find((e=>e.name===c.name)).id,c).then((t=>{n(e.map((e=>e.name===c.name?t:e))),a(""),o(""),x(`Successfully updated phone number for entry '${c.name}' to '${c.number}'!`,O)})).catch((e=>{x(`Error updating the number for the entry '${c.name}' to the phonebook.\n${e.response.data.error}.\nPlease refresh the page and try again!`,g)}))}else h(c).then((t=>{n(e.concat(t)),a(""),o(""),x(`Successfully created entry '${c.name} ${c.number}'!`,O)})).catch((e=>{x(`Error submitting the new entry: ${c.name} ${c.number} to the phonebook.\n${e.response.data.error}.\nPlease try again!`,g)}))},newName:t,newNumber:r,handleNameChange:e=>{a(e.target.value)},handleNumberChange:e=>{o(e.target.value)}}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(y,{persons:(n=>""===n?e:e.filter((e=>e.name.toLowerCase().includes(n.toLowerCase()))))(c),deleteEntry:t=>{const a=e.find((e=>e.id===t));window.confirm(`Delete entry ${a.name} ${a.number}?`)?b(t).then((t=>{console.log(t),n(e.filter((e=>e.id!==a.id))),x(`Successfully deleted entry ${a.name} ${a.number}`,O)})).catch((e=>{x(`Unable to delete entry ${a.name} ${a.number} from the server. Please try again!`,g)})):x(`the deletion of entry ${a.name} ${a.number} was cancelled`,O)}})]})};t(39);r.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.978bbfb7.chunk.js.map